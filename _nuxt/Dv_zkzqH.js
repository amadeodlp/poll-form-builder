import{K as p,n as a,p as i}from"./-P2loxI4.js";const S=p("form",()=>{const s=a([]),n=a([]);{const e=localStorage.getItem("forms");if(e)try{const t=JSON.parse(e);s.value=t.map(o=>({...o,createdAt:new Date(o.createdAt)}))}catch(t){console.error("Failed to parse forms from localStorage",t)}const r=localStorage.getItem("formResponses");if(r)try{const t=JSON.parse(r);n.value=t.map(o=>({...o,submittedAt:new Date(o.submittedAt)}))}catch(t){console.error("Failed to parse form responses from localStorage",t)}}i(s,e=>{localStorage.setItem("forms",JSON.stringify(e))},{deep:!0}),i(n,e=>{localStorage.setItem("formResponses",JSON.stringify(e))},{deep:!0});const c=e=>s.value.find(r=>r.id===e),m=e=>n.value.filter(r=>r.formId===e);function u(e,r,t){const o={id:Date.now().toString(),title:e,description:r,questions:t.map(f=>({...f,id:Math.random().toString(36).substring(2,9)})),createdAt:new Date};return s.value.push(o),o.id}function d(e,r){const t={id:Date.now().toString(),formId:e,answers:r,submittedAt:new Date};return n.value.push(t),t.id}function l(e){const r=s.value.findIndex(t=>t.id===e);return r!==-1?(s.value.splice(r,1),n.value=n.value.filter(t=>t.formId!==e),!0):!1}return{forms:s,responses:n,getFormById:c,getResponsesByFormId:m,createForm:u,submitFormResponse:d,deleteForm:l}});export{S as u};
