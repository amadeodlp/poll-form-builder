import{g as b,n as C,A as N,l as h,o as u,w as i,a as l,v as U,b as s,c as f,m as q,d as c,F as S,r as A,k as x,B as z,t as F,C as L,_ as E}from"./-P2loxI4.js";import{_ as I}from"./DvvqGPS5.js";import{_ as Q}from"./CbRQiVWx.js";import{_ as R}from"./Sijqtujb.js";import{u as j}from"./uk2bAjzX.js";import{r as D}from"./C8I70d8o.js";import{r as M}from"./4uSYv-KY.js";import"./DlAUqK2U.js";const T={class:"space-y-4"},W={key:0,class:"text-sm text-red-500 mt-1"},G={class:"flex justify-end space-x-3 pt-4"},H=b({__name:"PollCreator",emits:["created"],setup(w,{emit:_}){const v=j(),m=_,a=C(""),t=C(["",""]),o=N({question:"",options:""});function V(){t.value.push("")}function P(n){t.value.splice(n,1)}function O(){let n=!0;o.question="",o.options="",a.value.trim()||(o.question="Question is required",n=!1);const e=t.value.filter(r=>r.trim()!=="");return e.length<2&&(o.options="At least two options are required",n=!1),new Set(t.value.map(r=>r.trim().toLowerCase())).size!==e.length&&(o.options="All options must be unique",n=!1),n}function $(){if(!O())return;const n=t.value.filter(p=>p.trim()!==""),e=v.createPoll(a.value,n);y(),m("created",e)}function y(){a.value="",t.value=["",""],o.question="",o.options=""}return(n,e)=>{const p=I,r=Q,B=R;return u(),h(B,null,{header:i(()=>e[1]||(e[1]=[l("h2",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},"Create a new poll",-1)])),default:i(()=>[l("form",{onSubmit:U($,["prevent"]),class:"space-y-6"},[s(p,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=g=>a.value=g),label:"Question",placeholder:"What's your question?",required:!0,"error-message":o.question},null,8,["modelValue","error-message"]),l("div",T,[e[3]||(e[3]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[c(" Poll Options "),l("span",{class:"text-red-500"},"*")],-1)),(u(!0),f(S,null,A(t.value,(g,d)=>(u(),f("div",{key:d,class:"flex items-center space-x-2"},[s(p,{modelValue:t.value[d],"onUpdate:modelValue":k=>t.value[d]=k,placeholder:"Option text",required:!0,class:"flex-1"},null,8,["modelValue","onUpdate:modelValue"]),t.value.length>2?(u(),h(r,{key:0,variant:"ghost",size:"sm",type:"button",onClick:k=>P(d)},{default:i(()=>[s(x(z),{class:"h-5 w-5 text-red-500"})]),_:2},1032,["onClick"])):q("",!0)]))),128)),o.options?(u(),f("p",W,F(o.options),1)):q("",!0),s(r,{type:"button",variant:"outline",size:"sm",onClick:V,class:"mt-2"},{default:i(()=>[s(x(D),{class:"h-4 w-4 mr-1"}),e[2]||(e[2]=c(" Add Option "))]),_:1})]),l("div",G,[s(r,{type:"button",variant:"outline",onClick:y},{default:i(()=>e[4]||(e[4]=[c(" Reset ")])),_:1}),s(r,{type:"submit",variant:"primary"},{default:i(()=>e[5]||(e[5]=[c(" Create Poll ")])),_:1})])],32)]),_:1})}}}),J={class:"space-y-6"},K={class:"flex items-center mb-6"},ae=b({__name:"create",setup(w){const _=L();function v(m){_.push(`/polls/${m}`)}return(m,a)=>{const t=E,o=H;return u(),f("div",J,[l("div",K,[s(t,{to:"/polls",class:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 mr-2"},{default:i(()=>[s(x(M),{class:"h-5 w-5"})]),_:1}),a[0]||(a[0]=l("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"Create a New Poll",-1))]),s(o,{onCreated:v})])}}});export{ae as default};
