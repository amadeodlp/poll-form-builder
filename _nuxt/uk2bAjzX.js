import{K as d,n as u,p as f}from"./-P2loxI4.js";const v=d("poll",()=>{const l=u([]);{const e=localStorage.getItem("polls");if(e)try{const t=JSON.parse(e);l.value=t.map(o=>({...o,createdAt:new Date(o.createdAt)}))}catch(t){console.error("Failed to parse polls from localStorage",t)}}f(l,e=>{localStorage.setItem("polls",JSON.stringify(e))},{deep:!0});const s=e=>l.value.find(t=>t.id===e);function a(e,t){const o={id:Date.now().toString(),question:e,options:t.map(n=>({id:Math.random().toString(36).substring(2,9),text:n,votes:0})),createdAt:new Date};return l.value.push(o),o.id}function i(e,t){const o=l.value.find(r=>r.id===e);if(!o)return!1;const n=o.options.find(r=>r.id===t);return n?(n.votes++,!0):!1}function c(e){const t=l.value.findIndex(o=>o.id===e);return t!==-1?(l.value.splice(t,1),!0):!1}return{polls:l,getPollById:s,createPoll:a,voteOnPoll:i,deletePoll:c}});export{v as u};
