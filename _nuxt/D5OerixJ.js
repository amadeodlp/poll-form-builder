import{c as r,o,a as e,b as x,w as i,m as h,F as f,r as b,j as k,A as C,_ as B,q as L,D as R,s as D,d as g,t as d,l as I}from"./-P2loxI4.js";import{_ as N}from"./Sijqtujb.js";import{u as j}from"./Dv_zkzqH.js";import{_ as V}from"./DlAUqK2U.js";import{r as S}from"./4uSYv-KY.js";const E={setup(){const v=R(),n=L(),y=j(),t=k(()=>v.params.id),u=k(()=>y.getFormById(t.value)),c=k(()=>y.getResponsesByFormId(t.value)),l=C({});c.value&&c.value.length===1&&(l[c.value[0].id]=!0);function m(s){l[s]=!l[s]}function _(s,F){const w=s.answers.find(A=>A.questionId===F);return w?w.answer:void 0}function a(){u.value&&confirm("Are you sure you want to delete this form?")&&(y.deleteForm(t.value),n.push("/forms"))}function p(s){return typeof s=="string"&&(s=new Date(s)),new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(s)}return{form:u,responses:c,expandedResponses:l,toggleExpanded:m,findAnswer:_,deleteForm:a,formatDate:p}},components:{ArrowLeftIcon:S}},M={key:0,class:"space-y-8"},H={class:"flex items-center mb-6"},T={class:"max-w-5xl mx-auto"},U={class:"flex justify-between items-start"},z={class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},q={key:0,class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},G={class:"flex justify-between items-center"},J={class:"text-gray-600 dark:text-gray-400"},K={class:"font-medium"},O={class:"text-gray-600 dark:text-gray-400"},P={class:"font-medium"},Q={class:"space-y-4"},W={key:0,class:"text-center py-8 bg-gray-50 dark:bg-gray-800 rounded-md"},X={class:"flex justify-between items-center"},Y={class:"font-medium text-gray-900 dark:text-gray-100"},Z={class:"flex items-center space-x-4"},$={class:"text-sm text-gray-500 dark:text-gray-400"},ee=["onClick"],te={key:0},se={key:1},oe={key:0,class:"space-y-4"},re={class:"font-medium text-gray-900 dark:text-gray-100 mb-1"},ne={class:"text-gray-700 dark:text-gray-300"},ae={key:1,class:"whitespace-pre-line"},de={key:1,class:"text-gray-400 dark:text-gray-500 italic"},ie={key:1,class:"text-center py-2 text-sm text-gray-500 dark:text-gray-400"},le={key:1,class:"text-center p-12"};function ce(v,n,y,t,u,c){const l=D("ArrowLeftIcon"),m=B,_=N;return t.form?(o(),r("div",M,[e("div",H,[x(m,{to:"/forms",class:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300 mr-2"},{default:i(()=>[x(l,{class:"h-5 w-5"})]),_:1}),n[1]||(n[1]=e("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white"},"Form Responses",-1))]),e("div",T,[x(_,{class:"mb-6"},{header:i(()=>[e("div",U,[e("div",null,[e("h2",z,d(t.form.title),1),t.form.description?(o(),r("p",q,d(t.form.description),1)):h("",!0)]),e("div",null,[x(m,{to:`/forms/${t.form.id}`},{default:i(()=>n[2]||(n[2]=[e("button",{class:"px-3 py-1.5 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center space-x-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})]),e("span",null,"Fill Form")],-1)])),_:1},8,["to"])])])]),default:i(()=>[e("div",G,[e("div",null,[e("p",J,[e("span",K,d(t.form.questions.length),1),g(" "+d(t.form.questions.length===1?"question":"questions"),1)]),e("p",O,[e("span",P,d(t.responses.length),1),g(" "+d(t.responses.length===1?"response":"responses"),1)])]),t.responses.length===0?(o(),r("button",{key:0,onClick:n[0]||(n[0]=(...a)=>t.deleteForm&&t.deleteForm(...a)),class:"px-3 py-1.5 bg-red-600 text-white rounded-md hover:bg-red-700 flex items-center space-x-2"},n[3]||(n[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),e("span",null,"Delete Form",-1)]))):h("",!0)])]),_:1}),e("div",Q,[t.responses.length===0?(o(),r("div",W,n[4]||(n[4]=[e("p",{class:"text-gray-500"},"No responses yet",-1)]))):h("",!0),(o(!0),r(f,null,b(t.responses,(a,p)=>(o(),I(_,{key:a.id,class:"overflow-visible"},{header:i(()=>[e("div",X,[e("h4",Y," Response #"+d(p+1),1),e("div",Z,[e("span",$,d(t.formatDate(a.submittedAt)),1),e("button",{onClick:s=>t.toggleExpanded(a.id),class:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"},[t.expandedResponses[a.id]?(o(),r("span",se,"▲")):(o(),r("span",te,"▼"))],8,ee)])])]),default:i(()=>[t.expandedResponses[a.id]?(o(),r("div",oe,[(o(!0),r(f,null,b(t.form.questions,s=>(o(),r("div",{key:s.id,class:"border-b border-gray-200 dark:border-gray-700 pb-3 last:border-0 last:pb-0"},[e("h5",re,d(s.text),1),e("div",ne,[t.findAnswer(a,s.id)!==void 0?(o(),r(f,{key:0},[s.type==="radio"?(o(),r(f,{key:0},[g(d(t.findAnswer(a,s.id)),1)],64)):s.type==="long"?(o(),r("p",ae,d(t.findAnswer(a,s.id)),1)):(o(),r(f,{key:2},[g(d(t.findAnswer(a,s.id)),1)],64))],64)):(o(),r("span",de,"No answer provided"))])]))),128))])):(o(),r("div",ie," Click to expand "))]),_:2},1024))),128))])])])):(o(),r("div",le,[n[6]||(n[6]=e("p",{class:"text-gray-500 dark:text-gray-400"},"Form not found",-1)),x(m,{to:"/forms",class:"mt-4 inline-block"},{default:i(()=>n[5]||(n[5]=[e("button",{class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Back to Forms ",-1)])),_:1})]))}const ge=V(E,[["render",ce]]);export{ge as default};
